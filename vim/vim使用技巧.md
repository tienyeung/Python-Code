# <font color=#0099ff size=12 face="STCAIYUN">Vim实用技巧</font>

[TOC]

## 1 解决问题的方式

## 1.1 重复操作

- `.` 相当于宏，可重复上次操作
- `x` 删除光标下字符，dd 删除当前行
- **`e`词尾`$`行尾,`G`文件尾；`b`词首 `<HOME>`行首 `gg`文件首**
- `A` 移动到行尾，e.g. 若想在每行行尾添加` ;`则可以  ` A;<ESC>j.  `
- `f{char}` 定位到某字符，`s` 删除光标下字符，同时进入插入模式；`;`重复`f`命令，定位相同位置 `,`则是回头定位
- `u`撤销修改

## 1.2 手动替换

- 普通替换 `:%s/{待替换词}/{替换词}/g`
- `*`可以匹配搜索
- `cw` 删除光标到结束的单词，并进入插入模式
- 要替换一个多次出现的词时，可以用`*cw{word}<ESC>n.`

## 1.3 删除

- `cw` 删除光标到结束的单词，并进入插入模式
- `C` 大写C删除自光标开始整行

- `dbx` 反向删除，`x`删除一个字符
- `bdw` 跳到单词开头，删除整个单词
- `daw` **delete a word** 可搭配`.`重复删除
- `dap`删除整段
- `dd`删除整行
- `d2w`删除2个单词

## 1.4 拷贝

- `yyp`拷贝粘贴当前行

## 1.5 大小写

- `g~`反转大小写
- `gU`大写`gu`小写

# 2 插入模式

## 2.1 操作

- 删除：`<C-u>`删除至行首`<C-w>`删除一个单词
- 运算：`<C-r>={eq}<CR>`
- 替换：`R` 从普通模式进入替换插入模式
- **`O`行前另起一行   `A`行尾插入 `a`光标后插入 `i`光标前插入 `s`删除当前替换插入**

## 2.2 可视模式

- `v`可选中区域，`o`可重新调节 
- `V`面向行`<C-v>`面向列
- `gv`重新选中上次区域，`r{char}`用char来替换

# 3 命令行

## 3.1 普通命令

- `%`代表所有行，`'<,'>`代表所选区域
- `:t`拷贝`:m`移动     `[range]copy/m{address}`
- `@：`重复上次命令
- `:normal`执行普通模式

## 3.2 shell命令

- `!<cmd>`调用外部shell命令,执行多条直接进入shell`:shell``exit`退出
- `:2,$!sort -t',' -k2`第2行到最后 调用外部指令 以`,`分割，第二字段进行排序

# 4 文件系统

- `：edit <file>`打开另一文件
- 设置路径:`: set path+=<dir/>` 查找文件：`:find <filename>`

# 5 移动和跳转

- `g<move>`屏幕行
- **`e`词尾`$`行尾,`G`文件尾；`b`词首`w`下一次词首 `0` `I`行首 `gg`文件首**
- `W,B,E`作用在字符串
- `/{char}`查找单词
- `vi}`精确选区->`a"`(包括符号）、`i"`扩大选区
- 跳转位置：`   +   ./^ 上次修改/上次插入
- `m{char}`用于标记

# 6 寄存器

- `xp` 剪切到寄存器然后粘贴,`de`剪切单词

- `ddp`置换当前行和下一行，`yyp`复制粘贴

- `"ayiw`当前单词复制到寄存器a
- `yiw`默认复制到0寄存器，可用`"0P`

# 7 宏

- `q{register}`录制宏开始，以`q`结束，`@{register}`执行宏

- `qA`追加宏

- 迭代宏：（可用于编号）

```:let i =1 -> qa -> I<C-r>=i<CR> <ESC> -> :let i += 1 -> q ```

- 编辑宏：`:put a`   其中`:put`可将寄存器内容粘贴到当前行下方，编辑好后可用`"add`添加回寄存器a